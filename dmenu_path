#!/bin/sh
CACHE=$HOME/.dmenu_cache
UPTODATE=1
IFS=:

if test ! -f $CACHE 
then
	unset UPTODATE
fi

if test $UPTODATE
then
	for dir in $PATH
	do
		test $dir -nt $CACHE && unset UPTODATE
	done
fi

if test ! $UPTODATE
then
	for dir in $PATH
	do
		for file in "$dir"/*
		do
			test -x "$file" && echo "${file##*/}"
		done
	done | sort | uniq > $CACHE
fi

cat $CACHE
